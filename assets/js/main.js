$(function(){function itensCart(){$(".box-content-cart .list-product-cart").each(function(e){$(".title span").html(e+1)})}var url="assets/data/products.json",priceCurrent=0;$.ajax({url:url,dataType:"json",success:function(data){var itens="";$.each(data.products,function(index,element){priceParcel=element.price/element.installments,itens+='<div class="list-product" rel="'+element.sku+'">',itens+='	<img src="assets/img/'+element.imageProduct+'" alt="" />',itens+="	<h2>"+element.title+"</h2>",itens+='	<div class="price">',itens+="		<strong>"+element.currencyFormat+" <span>"+element.price.toFixed(2).split(".")[0]+"</span>, "+element.price.toFixed(2).split(".")[1]+"</strong>",itens+="		<strong>ou "+element.installments+"x de "+element.currencyFormat+" "+priceParcel.toFixed(2).split(".")+"</strong>",itens+="	</div>",itens+="</div>"}),$("aside").html(itens)}}),$("aside").delegate(".list-product","click",function(){$(".cart-empty").hide();var numberSku=$(this).attr("rel");$.ajax({url:url,dataType:"json",success:function(data){var itens="";$.each(data.products,function(index,element){element.sku==numberSku&&(itens+='<div class="list-product-cart">',itens+='	<div class="content-cart">',itens+='		<div class="image-product">',itens+='			<img src="assets/img/'+element.imageProduct+'" alt="'+element.title+'" />',itens+="		</div>",itens+='		<div class="description-product">',itens+="			<strong>"+element.title+"</strong>",itens+="			<p>"+element.availableSizes[1]+" | "+element.style+"</p>",itens+="			<p>Quantidade: 1</p>",itens+="		</div>",itens+='		<div class="price-product">',itens+="			<strong>"+element.currencyFormat+element.price.toFixed(2).split(".")+"</strong>",itens+="		</div>",itens+='		<a href="" class="remove-product" rel="'+numberSku+'">X</a>',itens+="	</div>",itens+="</div>",priceCurrent+=element.price,priceParcel=priceCurrent/10,$(".price-total strong").html(element.currencyFormat+" "+priceCurrent.toFixed(2).split(".")),$(".price-total span").html("ou em até 10 X R$ "+priceParcel.toFixed(2).split(".")))}),$(itens).appendTo(".box-content-cart"),itensCart()}})}),$(".box-content-cart").delegate(".remove-product","click",function(event){event.preventDefault(),$(this).parents(".list-product-cart").remove(),0==$(".box-content-cart .list-product-cart").length&&($(".cart-empty").show(),$(".title span").html(0));var numberSku=$(this).attr("rel");$.ajax({url:url,dataType:"json",success:function(data){$.each(data.products,function(index,element){element.sku==numberSku&&(priceCurrent-=element.price,priceParcel=priceCurrent/10,$(".price-total strong").html(element.currencyFormat+" "+priceCurrent.toFixed(2).split(".")),$(".price-total span").html("ou em até 10 X R$ "+priceParcel.toFixed(2).split(".")))}),itensCart()}})})});